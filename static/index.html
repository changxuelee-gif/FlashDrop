<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é—ªä¼  FlashDrop | æç®€æ–‡ä»¶ä¸­è½¬å·¥å…· - å¿«é€Ÿå®‰å…¨çš„æ–‡ä»¶ä¼ è¾“æœåŠ¡</title>
    
    <!-- ç½‘ç«™å›¾æ ‡é…ç½® -->
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link rel="shortcut icon" href="/static/favicon.svg">
    <link rel="apple-touch-icon" href="/static/favicon.svg">
    <meta name="msapplication-TileImage" content="/static/favicon.svg">
    <meta name="baidu-site-verification" content="codeva-gQk77NU1w8" />
    
    <meta name="description" content="é—ªä¼  FlashDrop æ˜¯ä¸€æ¬¾æç®€æ–‡ä»¶ä¸­è½¬å·¥å…·ï¼Œæä¾›å¿«é€Ÿã€å®‰å…¨çš„ä¸´æ—¶æ–‡ä»¶ä¼ è¾“æœåŠ¡ï¼Œæ–‡ä»¶å¤§å°é™åˆ¶50MBï¼Œ10åˆ†é’Ÿå†…æœ‰æ•ˆï¼Œæ”¯æŒæ‹–æ‹½ä¸Šä¼ å’Œå–ä»¶ç ä¸‹è½½ã€‚">
    <meta name="keywords" content="é—ªä¼ , FlashDrop, æ–‡ä»¶ä¸­è½¬, æ–‡ä»¶ä¼ è¾“, ä¸´æ—¶æ–‡ä»¶, å–ä»¶ç , å®‰å…¨ä¸Šä¼ ">
    <meta name="author" content="FlashDrop">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <link rel="canonical" href="//fd.tengxiangtech.com/">
    
    <!-- ç¤¾äº¤åª’ä½“åˆ†äº«æ ‡ç­¾ -->
    <meta property="og:title" content="é—ªä¼  FlashDrop | æç®€æ–‡ä»¶ä¸­è½¬å·¥å…·">
    <meta property="og:description" content="é—ªä¼  FlashDrop æ˜¯ä¸€æ¬¾æç®€æ–‡ä»¶ä¸­è½¬å·¥å…·ï¼Œæä¾›å¿«é€Ÿã€å®‰å…¨çš„ä¸´æ—¶æ–‡ä»¶ä¼ è¾“æœåŠ¡ã€‚">
    <meta property="og:type" content="website">
    <meta property="og:url" content="//fd.tengxiangtech.com/">
    <meta property="og:image" content="/static/og-image.png">
    
    <!-- Twitter å¡ç‰‡ -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="é—ªä¼  FlashDrop | æç®€æ–‡ä»¶ä¸­è½¬å·¥å…·">
    <meta name="twitter:description" content="é—ªä¼  FlashDrop æ˜¯ä¸€æ¬¾æç®€æ–‡ä»¶ä¸­è½¬å·¥å…·ï¼Œæä¾›å¿«é€Ÿã€å®‰å…¨çš„ä¸´æ—¶æ–‡ä»¶ä¼ è¾“æœåŠ¡ã€‚">
    <meta name="twitter:image" content="/static/og-image.png">
    
    <!-- PWAæ”¯æŒ -->
    <link rel="manifest" href="/static/manifest.json">
    <meta name="theme-color" content="#4F46E5">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="FlashDrop">
    
    <!-- åŠ è½½æ€§èƒ½ä¼˜åŒ– -->
    <!--<link rel="preconnect" href="https://unpkg.com">-->
    
    <script src="/static/js/vue.global.js"></script>
    <script src="/static/js/tailwindcss-3.4.17.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* è‡ªå®šä¹‰ä¸€äº›åŠ¨ç”»æ•ˆæœ */
        .fade-enter-active, .fade-leave-active { transition: opacity 0.3s ease; }
        .fade-enter-from, .fade-leave-to { opacity: 0; }
        
        /* éšè—æ•°å­—è¾“å…¥æ¡†çš„ç®­å¤´ */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
        
        /* Toasté€šçŸ¥æ ·å¼ */
        .toast-container {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .toast {
            padding: 12px 20px;
            border-radius: 8px;
            color: white;
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            animation: slideIn 0.3s ease-out;
            max-width: 400px;
            min-width: 280px;
            text-align: center;
        }
        
        .toast.success {
            background-color: #10b981;
        }
        
        .toast.error {
            background-color: #ef4444;
        }
        
        .toast.warning {
            background-color: #f59e0b;
        }
        
        .toast.info {
            background-color: #3b82f6;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(-50%) translateY(-20px);
                opacity: 0;
            }
            to {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
            to {
                transform: translateX(-50%) translateY(-20px);
                opacity: 0;
            }
        }
        
        .toast.fade-out {
            animation: slideOut 0.3s ease-out forwards;
        }
    </style>
    <script>
        // æ³¨å†ŒService Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/static/js/service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registered with scope:', registration.scope);
                    })
                    .catch(error => {
                        console.error('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</head>
<body class="bg-gray-100 text-gray-800 font-sans h-screen flex flex-col items-center justify-center selection:bg-indigo-100">

    <!-- Toasté€šçŸ¥å®¹å™¨ -->
    <div class="toast-container" id="toastContainer"></div>

    <div id="app" class="w-full max-w-md px-4">
        
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-indigo-600 tracking-tighter">
                <i class="fa-solid fa-bolt mr-2"></i>é—ªä¼  FlashDrop
            </h1>
            <p class="text-gray-500 text-sm mt-2">å³ä¼ å³ç”¨ Â· é˜…åå³ç„š Â· 10åˆ†é’Ÿæœ‰æ•ˆ</p>
            <!-- æ·»åŠ åˆ°æ¡Œé¢æŒ‰é’® -->
            <div id="addToHomeScreenContainer" class="mt-4">
                <button id="addToHomeScreenButton" class="inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors shadow-md hover:shadow-lg">
                    <i class="fa-solid fa-download mr-2"></i>
                    æ·»åŠ åˆ°æ¡Œé¢
                </button>
                <p class="mt-1 text-xs text-gray-500">è‹¥æµè§ˆå™¨ä¸æ”¯æŒæ­¤åŠŸèƒ½ï¼Œå»ºè®®æ”¶è—æœ¬é¡µä»¥ä¾¿ä¸‹æ¬¡å¿«é€Ÿè®¿é—®</p>
                <div id="manualInstallGuide" class="mt-2 text-xs text-gray-500 hidden">
                    <p class="flex items-center">
                        <i class="fa-solid fa-circle-info mr-1 text-yellow-500"></i>
                        è‹¥æ— æ³•è‡ªåŠ¨å®‰è£…ï¼Œè¯·æ‰‹åŠ¨æ“ä½œï¼š
                    </p>
                    <p class="mt-1 ml-4">ğŸ“± iOS: ç‚¹å‡»åˆ†äº«æŒ‰é’® â†’ æ·»åŠ åˆ°ä¸»å±å¹•</p>
                    <p class="ml-4">ğŸ’» Android: ç‚¹å‡»ä¸‰ç‚¹èœå• â†’ æ·»åŠ åˆ°ä¸»å±å¹•</p>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-2xl shadow-xl overflow-hidden min-h-[400px] relative transition-all duration-300">
            
            <div class="flex border-b border-gray-100">
                <button 
                    @click="switchMode('send')"
                    :class="['flex-1 py-4 text-center font-medium transition-colors', mode === 'send' ? 'text-indigo-600 bg-indigo-50 border-b-2 border-indigo-600' : 'text-gray-400 hover:text-gray-600']">
                    æˆ‘è¦å‘é€
                </button>
                <button 
                    @click="switchMode('receive')"
                    :class="['flex-1 py-4 text-center font-medium transition-colors', mode === 'receive' ? 'text-indigo-600 bg-indigo-50 border-b-2 border-indigo-600' : 'text-gray-400 hover:text-gray-600']">
                    æˆ‘è¦æ¥æ”¶
                </button>
            </div>

            <div class="p-6 h-full flex flex-col justify-center">

                <transition name="fade" mode="out-in">
                    <div v-if="mode === 'send'" key="send" class="text-center">
                        
                        <div v-if="!uploading && !uploadSuccess" 
                             class="border-2 border-dashed border-gray-300 rounded-xl p-8 cursor-pointer hover:border-indigo-400 hover:bg-indigo-50 transition-all group"
                             @click="triggerFileInput"
                             @drop.prevent="handleDrop" 
                             @dragover.prevent>
                            <div class="w-16 h-16 bg-indigo-100 text-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform">
                                <i class="fa-solid fa-cloud-arrow-up text-2xl"></i>
                            </div>
                            <h3 class="font-bold text-lg mb-1">ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶</h3>
                            <p class="text-xs text-gray-400">æœ€å¤§æ”¯æŒ 50MB</p>
                            <p class="text-xs text-yellow-500 mt-2"><i class="fa-solid fa-circle-info mr-1"></i>è¯·éµå®ˆæ³•å¾‹æ³•è§„ï¼Œå‹¿ä¸Šä¼ è¿è§„å†…å®¹</p>
                            <input type="file" ref="fileInput" class="hidden" @change="handleFileSelect" aria-label="é€‰æ‹©æ–‡ä»¶">
                        </div>

                        <div v-if="uploading" class="py-10">
                            <div class="text-indigo-600 text-lg font-bold mb-4">{{ progress }}%</div>
                            <div class="w-full bg-gray-200 rounded-full h-2.5 mb-4">
                                <div class="bg-indigo-600 h-2.5 rounded-full transition-all duration-100" :style="{ width: progress + '%' }"></div>
                            </div>
                            <p class="text-sm text-gray-500 animate-pulse">æ­£åœ¨åŠ å¯†ä¸Šä¼ ...</p>
                        </div>

                        <div v-if="uploadSuccess" class="py-6">
                            <div class="mb-2 text-gray-500 text-sm">æ‚¨çš„å–ä»¶ç </div>
                            <div class="text-6xl font-mono font-bold text-indigo-600 tracking-widest my-4 select-all cursor-pointer" @click="copyCode">
                                {{ generatedCode }}
                            </div>
                            <div class="bg-yellow-50 text-yellow-700 text-xs px-3 py-2 rounded-lg inline-block mb-6">
                                <i class="fa-regular fa-clock mr-1"></i> 10åˆ†é’Ÿå†…æœ‰æ•ˆ
                            </div>
                            <div class="flex space-x-3">
                                <button @click="resetUpload" class="flex-1 py-3 rounded-lg border border-gray-200 text-gray-600 hover:bg-gray-50 font-medium">
                                    å‘é€å¦ä¸€ä¸ª
                                </button>
                                <button @click="shareLink" class="flex-1 py-3 rounded-lg border border-indigo-200 text-indigo-600 hover:bg-indigo-50 font-medium">
                                    <i class="fa-solid fa-share mr-2"></i>åˆ†äº«
                                </button>
                            </div>
                        </div>

                    </div>

                    <div v-else key="receive" class="text-center">
                        <div class="mb-6">
                            <label class="block text-gray-500 text-sm mb-4">è¯·è¾“å…¥ 4 ä½å–ä»¶ç </label>
                            <input 
                                type="text" 
                                v-model="inputCode"
                                maxlength="4"
                                placeholder="0000"
                                class="w-full text-center text-5xl font-mono font-bold text-gray-800 border-b-2 border-gray-200 focus:border-indigo-600 focus:outline-none py-4 bg-transparent tracking-[1rem] placeholder-gray-200 transition-colors"
                            >
                        </div>

                        <button 
                            @click="handleDownload"
                            :disabled="inputCode.length !== 4 || downloading"
                            :class="['w-full py-4 rounded-xl text-white font-bold text-lg shadow-lg transition-all', 
                                     inputCode.length === 4 && !downloading ? 'bg-indigo-600 hover:bg-indigo-700 hover:shadow-indigo-200 transform hover:-translate-y-1' : 'bg-gray-300 cursor-not-allowed']">
                            <span v-if="!downloading"><i class="fa-solid fa-download mr-2"></i> ç«‹å³ä¸‹è½½</span>
                            <span v-else><i class="fa-solid fa-circle-notch fa-spin mr-2"></i>ä»¥æ­¤å¯»æ‰¾æ–‡ä»¶...</span>
                        </button>
                        
                        <p class="mt-4 text-xs text-gray-400">æ–‡ä»¶è¢«ä¸‹è½½ä¸€æ¬¡åå°†è‡ªåŠ¨é”€æ¯</p>
                    </div>
                </transition>

            </div>
        </div>

        <div class="mt-4 text-center text-xs text-gray-500 bg-yellow-50 border border-yellow-200 rounded-lg p-3">
            <p class="font-medium text-yellow-800 mb-1"><i class="fa-solid fa-shield-halved mr-1"></i>åˆè§„æç¤º</p>
            <p>è¯·å‹¿ä¸Šä¼ æˆ–ä¸‹è½½è¿åæ³•å¾‹æ³•è§„ã€ä¾µçŠ¯ä»–äººæƒç›Šæˆ–åŒ…å«æ•æ„Ÿå†…å®¹çš„æ–‡ä»¶ï¼Œå¦åˆ™åæœè‡ªè´Ÿã€‚</p>
        </div>
        
        <div class="mt-8 text-center text-xs text-gray-400">
            <p>Â© 2025 FlashDrop. ä¸ªäººå¼€å‘è€…ä½œå“.</p>
            <p class="mt-1">æç®€æ–‡ä»¶ä¸­è½¬å·¥å…· | å®‰å…¨å¿«é€Ÿçš„æ–‡ä»¶ä¼ è¾“æœåŠ¡</p>
            <p class="mt-3">
                <a href="#" onclick="showModal('userAgreementModal')" class="text-indigo-600 hover:text-indigo-800">ç”¨æˆ·åè®®</a>
                <span class="mx-2">ï½œ</span>
                <a href="#" onclick="showModal('privacyPolicyModal')" class="text-indigo-600 hover:text-indigo-800">éšç§æ”¿ç­–</a>
                <span class="mx-2">ï½œ</span>
                <a href="#" onclick="showModal('feedbackModal')" class="text-indigo-600 hover:text-indigo-800">åé¦ˆä¸¾æŠ¥</a>
            </p>
        </div>
        
        <!-- ç”¨æˆ·åè®®æ¨¡æ€æ¡† -->
        <div id="userAgreementModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
            <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold text-gray-800">ç”¨æˆ·åè®®</h3>
                    <button onclick="closeModal('userAgreementModal')" class="text-gray-500 hover:text-gray-700">
                        <i class="fa-solid fa-xmark"></i>
                    </button>
                </div>
                <div class="text-gray-600 text-sm space-y-4">
                    <h4 class="font-medium text-gray-800">1. æœåŠ¡æ¡æ¬¾</h4>
                    <p>æ¬¢è¿ä½¿ç”¨FlashDropæ–‡ä»¶ä¸­è½¬æœåŠ¡ã€‚æœ¬åè®®æ˜¯æ‚¨ä¸FlashDropä¹‹é—´å…³äºä½¿ç”¨æœ¬æœåŠ¡çš„æ³•å¾‹åè®®ã€‚</p>
                    
                    <h4 class="font-medium text-gray-800">2. ä½¿ç”¨è§„åˆ™</h4>
                    <ul class="list-disc pl-5 space-y-1">
                        <li>è¯·å‹¿ä¸Šä¼ æˆ–ä¸‹è½½è¿åæ³•å¾‹æ³•è§„çš„æ–‡ä»¶</li>
                        <li>è¯·å‹¿ä¸Šä¼ æˆ–ä¸‹è½½ä¾µçŠ¯ä»–äººçŸ¥è¯†äº§æƒçš„æ–‡ä»¶</li>
                        <li>è¯·å‹¿ä¸Šä¼ æˆ–ä¸‹è½½åŒ…å«æ¶æ„ä»£ç çš„æ–‡ä»¶</li>
                        <li>è¯·å‹¿ä¸Šä¼ æˆ–ä¸‹è½½åŒ…å«æ•æ„Ÿä¸ªäººä¿¡æ¯çš„æ–‡ä»¶</li>
                    </ul>
                    
                    <h4 class="font-medium text-gray-800">3. è´£ä»»é™åˆ¶</h4>
                    <p>FlashDropå¯¹æ–‡ä»¶çš„å®‰å…¨æ€§ã€å®Œæ•´æ€§å’Œå¯ç”¨æ€§ä¸åšä»»ä½•ä¿è¯ã€‚æ‚¨åº”è‡ªè¡Œæ‰¿æ‹…ä½¿ç”¨æœ¬æœåŠ¡çš„é£é™©ã€‚</p>
                    
                    <h4 class="font-medium text-gray-800">4. æœåŠ¡å˜æ›´</h4>
                    <p>FlashDropä¿ç•™éšæ—¶å˜æ›´æˆ–ç»ˆæ­¢æœåŠ¡çš„æƒåˆ©ï¼Œæ— éœ€äº‹å…ˆé€šçŸ¥ã€‚</p>
                    
                    <h4 class="font-medium text-gray-800">5. åè®®å˜æ›´</h4>
                    <p>FlashDropä¿ç•™éšæ—¶ä¿®æ”¹æœ¬åè®®çš„æƒåˆ©ï¼Œä¿®æ”¹åçš„åè®®å°†åœ¨ç½‘ç«™ä¸Šå…¬å¸ƒã€‚</p>
                </div>
                <div class="mt-6 flex justify-end">
                    <button onclick="closeModal('userAgreementModal')" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                        åŒæ„å¹¶å…³é—­
                    </button>
                </div>
            </div>
        </div>

        <!-- éšç§æ”¿ç­–æ¨¡æ€æ¡† -->
        <div id="privacyPolicyModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
            <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold text-gray-800">éšç§æ”¿ç­–</h3>
                    <button onclick="closeModal('privacyPolicyModal')" class="text-gray-500 hover:text-gray-700">
                        <i class="fa-solid fa-xmark"></i>
                    </button>
                </div>
                <div class="text-gray-600 text-sm space-y-4">
                    <h4 class="font-medium text-gray-800">1. æ•°æ®æ”¶é›†</h4>
                    <p>FlashDropæ”¶é›†ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
                    <ul class="list-disc pl-5 space-y-1">
                        <li>æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½çš„æ—¶é—´å’ŒIPåœ°å€</li>
                        <li>æ–‡ä»¶å¤§å°å’Œç±»å‹</li>
                        <li>ç”¨äºç”Ÿæˆå–ä»¶ç çš„éšæœºæ•°æ®</li>
                    </ul>
                    
                    <h4 class="font-medium text-gray-800">2. æ•°æ®ä½¿ç”¨</h4>
                    <p>æ”¶é›†çš„æ•°æ®ä»…ç”¨äºæä¾›å’Œæ”¹è¿›æœåŠ¡ï¼Œä¸ä¼šç”¨äºå…¶ä»–ç›®çš„ã€‚</p>
                    
                    <h4 class="font-medium text-gray-800">3. æ•°æ®å­˜å‚¨</h4>
                    <p>ä¸Šä¼ çš„æ–‡ä»¶å°†åœ¨10åˆ†é’Ÿåè‡ªåŠ¨åˆ é™¤ï¼Œå…¶ä»–æ•°æ®å°†åœ¨30å¤©åè‡ªåŠ¨åˆ é™¤ã€‚</p>
                    
                    <h4 class="font-medium text-gray-800">4. æ•°æ®ä¿æŠ¤</h4>
                    <p>FlashDropé‡‡å–åˆç†çš„å®‰å…¨æªæ–½ä¿æŠ¤æ‚¨çš„æ•°æ®ï¼Œä½†ä¸ä¿è¯æ•°æ®çš„ç»å¯¹å®‰å…¨ã€‚</p>
                    
                    <h4 class="font-medium text-gray-800">5. éšç§æ”¿ç­–å˜æ›´</h4>
                    <p>FlashDropä¿ç•™éšæ—¶ä¿®æ”¹æœ¬éšç§æ”¿ç­–çš„æƒåˆ©ï¼Œä¿®æ”¹åçš„æ”¿ç­–å°†åœ¨ç½‘ç«™ä¸Šå…¬å¸ƒã€‚</p>
                </div>
                <div class="mt-6 flex justify-end">
                    <button onclick="closeModal('privacyPolicyModal')" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                        åŒæ„å¹¶å…³é—­
                    </button>
                </div>
            </div>
        </div>

        <!-- åé¦ˆä¸¾æŠ¥æ¨¡æ€æ¡† -->
        <div id="feedbackModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center">
            <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold text-gray-800">åé¦ˆä¸¾æŠ¥</h3>
                    <button onclick="closeModal('feedbackModal')" class="text-gray-500 hover:text-gray-700">
                        <i class="fa-solid fa-xmark"></i>
                    </button>
                </div>
                <div class="text-gray-600 text-sm space-y-4">
                    <p>è¯·é€‰æ‹©åé¦ˆç±»å‹ï¼š</p>
                    <div class="space-y-3">
                        <label class="flex items-center">
                            <input type="radio" name="feedbackType" value="bug" class="mr-2">
                            <span>åŠŸèƒ½bug</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="feedbackType" value="suggestion" class="mr-2">
                            <span>åŠŸèƒ½å»ºè®®</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="feedbackType" value="report" class="mr-2">
                            <span>è¿è§„å†…å®¹ä¸¾æŠ¥</span>
                        </label>
                    </div>
                    <div>
                        <label for="feedbackContent" class="block mb-1 font-medium">è¯¦ç»†å†…å®¹ï¼š</label>
                        <textarea id="feedbackContent" rows="4" class="w-full border border-gray-300 rounded-md p-2 text-sm" placeholder="è¯·æè¿°æ‚¨çš„é—®é¢˜æˆ–å»ºè®®"></textarea>
                    </div>
                    <div>
                        <label for="feedbackContact" class="block mb-1 font-medium">è”ç³»æ–¹å¼ï¼ˆå¯é€‰ï¼‰ï¼š</label>
                        <input type="text" id="feedbackContact" class="w-full border border-gray-300 rounded-md p-2 text-sm" placeholder="é‚®ç®±æˆ–æ‰‹æœºå·">
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-3">
                    <button onclick="closeModal('feedbackModal')" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300">
                        å–æ¶ˆ
                    </button>
                    <button onclick="submitFeedback()" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                        æäº¤
                    </button>
                </div>
            </div>
        </div>

    </div>

    <script>
        // æ·»åŠ åˆ°æ¡Œé¢åŠŸèƒ½
        let deferredPrompt;
        const addToHomeScreenContainer = document.getElementById('addToHomeScreenContainer');
        const addToHomeScreenButton = document.getElementById('addToHomeScreenButton');
        
        // æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒå®‰è£…
        function checkInstallSupport() {
            // æ£€æŸ¥æ˜¯å¦å®‰è£…äº†Service Worker
            if (!('serviceWorker' in navigator)) {
                console.log('Service Worker not supported');
                return false;
            }
            
            // æ£€æŸ¥æ˜¯å¦æ”¯æŒbeforeinstallpromptäº‹ä»¶
            if (!('beforeinstallprompt' in window)) {
                console.log('beforeinstallprompt not supported');
                return false;
            }
            
            // æ£€æŸ¥æ˜¯å¦å·²ç»å®‰è£…
            if (window.matchMedia('(display-mode: standalone)').matches) {
                console.log('Already installed');
                return false;
            }
            
            return true;
        }
        
        // åˆå§‹åŒ–å®‰è£…æ£€æŸ¥
        function initInstallCheck() {
            const isSupported = checkInstallSupport();
            const manualInstallGuide = document.getElementById('manualInstallGuide');
            
            if (!isSupported) {
                // å¦‚æœä¸æ”¯æŒå®‰è£…åŠŸèƒ½ï¼Œæ˜¾ç¤ºåŸºæœ¬æç¤º
                showToast('æ­¤æµè§ˆå™¨å¯èƒ½ä¸æ”¯æŒæ·»åŠ åˆ°æ¡Œé¢åŠŸèƒ½', 'info', 3000);
                console.log('Installation not supported in this browser');
            }
        }
        
        // ç›‘å¬beforeinstallpromptäº‹ä»¶
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('beforeinstallprompt event captured');
            // é˜»æ­¢Chrome 67åŠæ›´æ—©ç‰ˆæœ¬è‡ªåŠ¨æ˜¾ç¤ºå®‰è£…æç¤º
            e.preventDefault();
            // ä¿å­˜äº‹ä»¶ä»¥ä¾¿ä»¥åè§¦å‘
            deferredPrompt = e;
            
            // æ˜¾ç¤ºæµè§ˆå™¨æ”¯æŒå®‰è£…çš„æç¤º
            showToast('å¯ä»¥å°†åº”ç”¨æ·»åŠ åˆ°æ¡Œé¢ä½¿ç”¨', 'info', 3000);
        });
        
        // æ·»åŠ åˆ°æ¡Œé¢æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        if (addToHomeScreenButton) {
            addToHomeScreenButton.addEventListener('click', async () => {
                const manualInstallGuide = document.getElementById('manualInstallGuide');
                
                // å†æ¬¡æ£€æŸ¥å®‰è£…æ”¯æŒ
                if (!checkInstallSupport()) {
                    showToast('æ­¤æµè§ˆå™¨ä¸æ”¯æŒæ·»åŠ åˆ°æ¡Œé¢åŠŸèƒ½', 'warning');
                    if (manualInstallGuide) {
                        manualInstallGuide.classList.remove('hidden');
                    }
                    return;
                }
                
                if (!deferredPrompt) {
                    // å¦‚æœæ²¡æœ‰deferredPromptï¼Œå¯èƒ½æ˜¯å› ä¸ºæµè§ˆå™¨æ²¡æœ‰è§¦å‘äº‹ä»¶
                    showToast('æµè§ˆå™¨æš‚æœªå‡†å¤‡å¥½å®‰è£…ï¼Œå¯å°è¯•åˆ·æ–°é¡µé¢åå†è¯•', 'warning');
                    console.log('deferredPrompt not available');
                    
                    // æ£€æŸ¥å½“å‰æµè§ˆå™¨ç¯å¢ƒ
                    if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {
                        showToast('iOSè®¾å¤‡è¯·ä½¿ç”¨Safariæµè§ˆå™¨å¹¶é€šè¿‡åˆ†äº«æŒ‰é’®æ·»åŠ åˆ°ä¸»å±å¹•', 'info');
                    } else if (navigator.userAgent.match(/Android/i)) {
                        showToast('Androidè®¾å¤‡è¯·ä½¿ç”¨Chromeæµè§ˆå™¨å¹¶é€šè¿‡ä¸‰ç‚¹èœå•æ·»åŠ åˆ°ä¸»å±å¹•', 'info');
                    }
                    
                    if (manualInstallGuide) {
                        manualInstallGuide.classList.remove('hidden');
                    }
                    return;
                }
                
                try {
                    // æ˜¾ç¤ºå®‰è£…æç¤º
                    console.log('Showing install prompt');
                    deferredPrompt.prompt();
                    
                    // ç­‰å¾…ç”¨æˆ·å“åº”
                    const { outcome } = await deferredPrompt.userChoice;
                    console.log('User choice:', outcome);
                    
                    // æ— è®ºç”¨æˆ·é€‰æ‹©å¦‚ä½•ï¼Œé‡ç½®deferredPrompt
                    deferredPrompt = null;
                    
                    // æ˜¾ç¤ºç»“æœ
                    if (outcome === 'accepted') {
                        showToast('å·²æˆåŠŸæ·»åŠ åˆ°æ¡Œé¢ï¼', 'success');
                        // å¦‚æœå®‰è£…æˆåŠŸï¼Œéšè—æ‰‹åŠ¨å®‰è£…æŒ‡å—
                        if (manualInstallGuide) {
                            manualInstallGuide.classList.add('hidden');
                        }
                    } else {
                        // å¦‚æœç”¨æˆ·æ‹’ç»ï¼Œæ˜¾ç¤ºæ‰‹åŠ¨å®‰è£…æŒ‡å—
                        showToast('å·²å–æ¶ˆè‡ªåŠ¨å®‰è£…ï¼Œæ‚¨å¯ä»¥å°è¯•æ‰‹åŠ¨å®‰è£…', 'info');
                        if (manualInstallGuide) {
                            manualInstallGuide.classList.remove('hidden');
                        }
                    }
                } catch (error) {
                    // å¦‚æœå®‰è£…è¿‡ç¨‹å‡ºé”™ï¼Œæ˜¾ç¤ºæ‰‹åŠ¨å®‰è£…æŒ‡å—
                    console.error('å®‰è£…åˆ°æ¡Œé¢å¤±è´¥:', error);
                    showToast('å®‰è£…å¤±è´¥ï¼Œè¯·å°è¯•æ‰‹åŠ¨å®‰è£…', 'error');
                    if (manualInstallGuide) {
                        manualInstallGuide.classList.remove('hidden');
                    }
                }
            });
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–æ£€æŸ¥
        window.addEventListener('DOMContentLoaded', initInstallCheck);
        
        // æ¨¡æ€æ¡†åŠŸèƒ½
        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('hidden');
                // é˜²æ­¢èƒŒæ™¯æ»šåŠ¨
                document.body.style.overflow = 'hidden';
            }
        }
        
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('hidden');
                // æ¢å¤èƒŒæ™¯æ»šåŠ¨
                document.body.style.overflow = 'auto';
            }
        }
        
        function submitFeedback() {
            const feedbackType = document.querySelector('input[name="feedbackType"]:checked');
            const feedbackContent = document.getElementById('feedbackContent').value;
            const feedbackContact = document.getElementById('feedbackContact').value;
            
            if (!feedbackType) {
                showToast('è¯·é€‰æ‹©åé¦ˆç±»å‹', 'warning');
                return;
            }
            
            if (!feedbackContent.trim()) {
                showToast('è¯·å¡«å†™è¯¦ç»†å†…å®¹', 'warning');
                return;
            }
            
            // åˆ›å»ºè¡¨å•æ•°æ®
            const formData = new FormData();
            formData.append('feedback_type', feedbackType.value);
            formData.append('content', feedbackContent);
            formData.append('contact', feedbackContact);
            
            // å‘é€åé¦ˆåˆ°åç«¯API
            fetch('/api/feedback', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    // æ˜¾ç¤ºæˆåŠŸæç¤º
                    showToast('åé¦ˆå·²æäº¤ï¼Œæ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼', 'success');
                    
                    // å…³é—­æ¨¡æ€æ¡†å¹¶é‡ç½®è¡¨å•
                    closeModal('feedbackModal');
                    document.querySelector('input[name="feedbackType"]:checked').checked = false;
                    document.getElementById('feedbackContent').value = '';
                    document.getElementById('feedbackContact').value = '';
                } else {
                    // æ˜¾ç¤ºé”™è¯¯æç¤º
                    showToast('åé¦ˆæäº¤å¤±è´¥ï¼š' + data.detail, 'error');
                }
            })
            .catch(error => {
                console.error('Feedback submission error:', error);
                showToast('åé¦ˆæäº¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•', 'error');
            });
        }
        
        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('fixed')) {
                e.target.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }
        });
        
        const { createApp, ref } = Vue;
        
        
        // Toasté€šçŸ¥å‡½æ•°
        function showToast(message, type = 'info', duration = 3000) {
            const toastContainer = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            
            // æ·»åŠ å›¾æ ‡
            const icon = document.createElement('i');
            switch(type) {
                case 'success':
                    icon.className = 'fa-solid fa-check-circle mr-2';
                    break;
                case 'error':
                    icon.className = 'fa-solid fa-times-circle mr-2';
                    break;
                case 'warning':
                    icon.className = 'fa-solid fa-exclamation-circle mr-2';
                    break;
                case 'info':
                default:
                    icon.className = 'fa-solid fa-info-circle mr-2';
                    break;
            }
            toast.insertBefore(icon, toast.firstChild);
            
            toastContainer.appendChild(toast);
            
            // è‡ªåŠ¨å…³é—­
            setTimeout(() => {
                toast.classList.add('fade-out');
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, duration);
        }
        
        createApp({
            setup() {
                // çŠ¶æ€å˜é‡
                const mode = ref('send'); // å½“å‰æ¨¡å¼: send | receive
                const uploading = ref(false);
                const uploadSuccess = ref(false);
                const progress = ref(0);
                const generatedCode = ref('');
                
                const inputCode = ref('');
                const downloading = ref(false);
                const fileInput = ref(null);

                // åˆ‡æ¢æ¨¡å¼
                const switchMode = (m) => {
                    mode.value = m;
                    // é‡ç½®éƒ¨åˆ†çŠ¶æ€
                    if(m === 'receive') {
                        inputCode.value = '';
                    }
                };
                
                // è§£æURLå‚æ•°
                const parseUrlParams = () => {
                    const params = new URLSearchParams(window.location.search);
                    const code = params.get('code');
                    if (code && code.length === 4 && /^\d+$/.test(code)) {
                        // å¦‚æœURLä¸­æœ‰æœ‰æ•ˆå–ä»¶ç ï¼Œè‡ªåŠ¨å¡«å……å¹¶åˆ‡æ¢åˆ°æ¥æ”¶æ¨¡å¼
                        inputCode.value = code;
                        mode.value = 'receive';
                        showToast(`æ£€æµ‹åˆ°å–ä»¶ç  ${code}ï¼Œå·²è‡ªåŠ¨å¡«å……`, "success");
                    }
                };
                
                // é¡µé¢åŠ è½½æ—¶è§£æURLå‚æ•°
                parseUrlParams();

                // è§¦å‘æ–‡ä»¶é€‰æ‹©
                const triggerFileInput = () => {
                    fileInput.value.click();
                };

                // å¤„ç†æ–‡ä»¶é€‰æ‹©
                const handleFileSelect = (event) => {
                    const file = event.target.files[0];
                    if (file) startUpload(file);
                };

                // å¤„ç†æ‹–æ‹½
                const handleDrop = (event) => {
                    const file = event.dataTransfer.files[0];
                    if (file) startUpload(file);
                };

                // æ ¸å¿ƒé€»è¾‘ï¼šä¸Šä¼ æ–‡ä»¶
                const startUpload = (file) => {
                    // æ£€æŸ¥å¤§å° (æ¯”å¦‚ 50MB)
                    if (file.size > 50 * 1024 * 1024) {
                        showToast("æ–‡ä»¶å¤ªå¤§å•¦ï¼Œè¯·ä¸Šä¼  50MB ä»¥å†…çš„æ–‡ä»¶", "error");
                        return;
                    }

                    uploading.value = true;
                    progress.value = 0;

                    // çœŸå®å¯¹æ¥åç«¯ä»£ç 
                    const formData = new FormData();
                    formData.append('file', file);
                    
                    // æ¨¡æ‹Ÿè¿›åº¦æ›´æ–°
                    const interval = setInterval(() => {
                        if (progress.value < 90) { // æœ€å¤šåˆ°90%ï¼Œç­‰åç«¯è¿”å›åå†åˆ°100%
                            progress.value += 5;
                        }
                    }, 100);
                    
                    fetch('/upload', {
                        method: 'POST',
                        body: formData
                    })
                    .then(res => res.json())
                    .then(data => {
                        clearInterval(interval);
                        progress.value = 100;
                        generatedCode.value = data.code;
                        uploading.value = false;
                        uploadSuccess.value = true;
                    })
                    .catch(error => {
                        clearInterval(interval);
                        showToast('ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•ï¼', 'error');
                        uploading.value = false;
                    });
                };

                // é‡ç½®ä¸Šä¼ 
                const resetUpload = () => {
                    uploadSuccess.value = false;
                    progress.value = 0;
                    generatedCode.value = '';
                };

                // å¤åˆ¶å–ä»¶ç 
                const copyCode = () => {
                    const code = generatedCode.value;
                    
                    // ä¼˜å…ˆä½¿ç”¨ç°ä»£Clipboard API
                    if (navigator.clipboard && navigator.clipboard.writeText) {
                        navigator.clipboard.writeText(code)
                            .then(() => {
                                showToast("å–ä»¶ç å·²å¤åˆ¶ï¼", "success");
                            })
                            .catch(err => {
                                console.error('Clipboard API error:', err);
                                // é™çº§æ–¹æ¡ˆ
                                fallbackCopyTextToClipboard(code);
                            });
                    } else {
                        // é™çº§æ–¹æ¡ˆ
                        fallbackCopyTextToClipboard(code);
                    }
                };
                
                // é™çº§å¤åˆ¶æ–¹æ¡ˆ
                const fallbackCopyTextToClipboard = (text) => {
                    try {
                        // åˆ›å»ºä¸´æ—¶è¾“å…¥æ¡†
                        const textArea = document.createElement('textarea');
                        textArea.value = text;
                        
                        // è®¾ç½®æ ·å¼ä»¥é¿å…å½±å“é¡µé¢å¸ƒå±€
                        textArea.style.position = 'fixed';
                        textArea.style.opacity = '0';
                        textArea.style.left = '-999999px';
                        textArea.style.top = '-999999px';
                        
                        // æ·»åŠ åˆ°é¡µé¢
                        document.body.appendChild(textArea);
                        
                        // é€‰æ‹©å¹¶å¤åˆ¶æ–‡æœ¬
                        textArea.focus();
                        textArea.select();
                        const successful = document.execCommand('copy');
                        
                        // ç§»é™¤ä¸´æ—¶å…ƒç´ 
                        document.body.removeChild(textArea);
                        
                        if (successful) {
                            showToast("å–ä»¶ç å·²å¤åˆ¶ï¼", "success");
                        } else {
                            showToast("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶", "error");
                        }
                    } catch (err) {
                        console.error('Fallback copy error:', err);
                        showToast("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶", "error");
                    }
                };
                
                // åˆ†äº«åŠŸèƒ½
                const shareLink = () => {
                    // æ£€æŸ¥æ˜¯å¦æœ‰å–ä»¶ç 
                    if (!generatedCode.value) {
                        showToast("è¯·å…ˆä¸Šä¼ æ–‡ä»¶è·å–å–ä»¶ç ", "warning");
                        return;
                    }
                    
                    // æ„å»ºåˆ†äº«é“¾æ¥ï¼ˆåŒ…å«å–ä»¶ç ï¼‰
                    const shareUrl = `${window.location.origin}/?code=${generatedCode.value}`;
                    
                    // æ£€æµ‹æ˜¯å¦ä¸ºç§»åŠ¨è®¾å¤‡
                    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                    
                    if (isMobile && navigator.share) {
                        // ç§»åŠ¨è®¾å¤‡ä¸”æ”¯æŒåŸç”Ÿåˆ†äº«API
                        navigator.share({
                            title: 'FlashDrop æ–‡ä»¶åˆ†äº«',
                            text: `ä½¿ç”¨å–ä»¶ç  ${generatedCode.value} ä¸‹è½½æˆ‘åˆ†äº«çš„æ–‡ä»¶`,
                            url: shareUrl
                        })
                        .then(() => {
                            showToast("åˆ†äº«æˆåŠŸï¼", "success");
                        })
                        .catch((error) => {
                            console.error('åˆ†äº«å¤±è´¥:', error);
                            // åˆ†äº«å¤±è´¥æ—¶é™çº§åˆ°å‰ªè´´æ¿å¤åˆ¶
                            copyShareLink(shareUrl);
                        });
                    } else {
                        // æ¡Œé¢è®¾å¤‡æˆ–ä¸æ”¯æŒåŸç”Ÿåˆ†äº«APIçš„ç§»åŠ¨è®¾å¤‡ï¼Œå¤åˆ¶åˆ°å‰ªè´´æ¿
                        copyShareLink(shareUrl);
                    }
                };
                
                // å¤åˆ¶åˆ†äº«é“¾æ¥
                const copyShareLink = (shareUrl) => {
                    if (navigator.clipboard && navigator.clipboard.writeText) {
                        navigator.clipboard.writeText(shareUrl)
                            .then(() => {
                                showToast("åˆ†äº«é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼", "success");
                            })
                            .catch(err => {
                                console.error('Clipboard API error:', err);
                                // é™çº§æ–¹æ¡ˆ
                                fallbackCopyTextToClipboard(shareUrl);
                            });
                    } else {
                        // é™çº§æ–¹æ¡ˆ
                        fallbackCopyTextToClipboard(shareUrl);
                    }
                };

                // æ ¸å¿ƒé€»è¾‘ï¼šä¸‹è½½æ–‡ä»¶ (è¿™é‡Œç›®å‰æ˜¯æ¨¡æ‹Ÿ Mock)
                const handleDownload = () => {
                    if (inputCode.value.length !== 4) return;
                    
                    downloading.value = true;

                    // --- æ¨¡æ‹Ÿä¸‹è½½è¿‡ç¨‹ Start ---
                    setTimeout(() => {
                        downloading.value = false;
                        // ç®€å•æ¼”ç¤ºï¼šå¦‚æœåœ¨æµ‹è¯•æ—¶ï¼Œä½ è¾“å…¥çš„ç å’Œåˆšæ‰ç”Ÿæˆçš„ç ä¸€æ ·
                        if (generatedCode.value && inputCode.value == generatedCode.value) {
                             // alert(`æˆåŠŸæ‰¾åˆ°æ–‡ä»¶ï¼å‡†å¤‡ä¸‹è½½... (çœŸå®ç¯å¢ƒä¸­æµè§ˆå™¨ä¼šå¼€å§‹ä¸‹è½½)`);
                            //  showToast(`æˆåŠŸæ‰¾åˆ°æ–‡ä»¶ï¼å‡†å¤‡ä¸‹è½½... (çœŸå®ç¯å¢ƒä¸­æµè§ˆå™¨ä¼šå¼€å§‹ä¸‹è½½)`, "success");
                             // ä¸‹è½½æˆåŠŸåï¼Œé€»è¾‘ä¸Šåº”è¯¥é‡ç½®çŠ¶æ€æˆ–è·³è½¬
                        } else {
                            // æ¨¡æ‹Ÿåªæœ‰ç‰¹å®šç æ‰æˆåŠŸï¼Œæˆ–è€…éšæœºå¤±è´¥
                            if(Math.random() > 0.5) {
                                showToast("æœªæ‰¾åˆ°è¯¥æ–‡ä»¶ï¼Œæˆ–æ–‡ä»¶å·²è¿‡æœŸé”€æ¯ã€‚", "error");
                            } else {
                                showToast("ä¸‹è½½å¼€å§‹ï¼(æ¨¡æ‹Ÿ)", "success");
                            }
                        }
                    }, 1500);

                    // çœŸå®å¯¹æ¥åç«¯ä»£ç 
                    window.location.href = `/download/${inputCode.value}`;
                    // --- æ¨¡æ‹Ÿä¸‹è½½è¿‡ç¨‹ End ---
                };

                return {
                    mode,
                    switchMode,
                    fileInput,
                    triggerFileInput,
                    handleFileSelect,
                    handleDrop,
                    uploading,
                    uploadSuccess,
                    progress,
                    generatedCode,
                    resetUpload,
                    copyCode,
                    shareLink,
                    inputCode,
                    downloading,
                    handleDownload
                };
            }
        }).mount('#app');
    </script>
    <script> var _mtj = _mtj || []; (function () { var mtj = document.createElement("script"); mtj.src = "https://node95.aizhantj.com:21233/tjjs/?k=hsrep7a275h"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(mtj, s); })(); </script>
    <!-- å¤‡æ¡ˆä¿¡æ¯ -->
    <div class="text-center text-xs text-gray-400 mt-4 mb-8">
        <p><a href="https://beian.miit.gov.cn/" class="hover:text-indigo-500 transition-colors" target="_blank">å†€ICPå¤‡2025115369å·</a></p>
    </div>
</body>
</html>